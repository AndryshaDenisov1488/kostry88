<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¢–µ—Å—Ç –∫–∞—Ä—Ç—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
            margin: 0;
            padding: 0;
            background: #228B22;
        }

        #mapScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #228B22;
        }

        .map-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            box-sizing: border-box;
        }

        .map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
            background-image: url('stadion.jpg');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            overflow: hidden;
        }

        .map-point {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #FFD700;
            border: 3px solid #FFFFFF;
            z-index: 3;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #000;
        }

        .character {
            position: absolute;
            width: 60px;
            height: 60px;
            z-index: 10;
            font-size: 50px;
        }

        .info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="mapScreen">
        <div class="map-container">
            <div class="map" id="map"></div>
        </div>
    </div>
    
    <div class="info" id="info">
        –†–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞: <span id="screenSize"></span><br>
        –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã: <span id="mapSize"></span><br>
        –¢–æ—á–∫–∏: <span id="pointsCount">0</span>
    </div>

    <script>
        const map = document.getElementById('map');
        const info = document.getElementById('info');
        
        function updateInfo() {
            const screenW = window.innerWidth;
            const screenH = window.innerHeight;
            document.getElementById('screenSize').textContent = `${screenW}x${screenH}`;
            const mapRect = map.getBoundingClientRect();
            const mapContainer = document.querySelector('.map-container');
            const containerRect = mapContainer ? mapContainer.getBoundingClientRect() : mapRect;
            document.getElementById('mapSize').textContent = `${Math.round(containerRect.width)}x${Math.round(containerRect.height)} (–∫–∞—Ä—Ç–∞: ${Math.round(mapRect.width)}x${Math.round(mapRect.height)})`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
            const hasOverflow = mapRect.width > screenW || mapRect.height > screenH || 
                               containerRect.width > screenW || containerRect.height > screenH;
            if (hasOverflow) {
                info.style.background = 'rgba(255, 0, 0, 0.7)';
            } else {
                info.style.background = 'rgba(0, 255, 0, 0.7)';
            }
        }

        function calculatePoints() {
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫–∏ –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞
            const centerX = viewportWidth / 2;
            const centerY = viewportHeight / 2;
            
            // –†–∞–∑–º–µ—Ä –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —Ç–æ—á–µ–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –ø–æ–ª—è (—Å—Ö–µ–º–∞ 5x5)
            const isMobile = viewportWidth <= 768;
            const areaWidth = Math.min(isMobile ? 300 : 600, viewportWidth * 0.5);
            const areaHeight = Math.min(isMobile ? 300 : 600, viewportHeight * 0.5);
            
            // –°–æ–∑–¥–∞—ë–º —Å–µ—Ç–∫—É 5x5 –≤ —Ü–µ–Ω—Ç—Ä–µ –ø–æ–ª—è
            const columns = 5;
            const rows = 5;
            const totalStages = 25;
            const segmentWidth = areaWidth / (columns - 1);
            const segmentHeight = areaHeight / (rows - 1);
            
            // –ù–∞—á–∏–Ω–∞–µ–º —Å –ª–µ–≤–æ–≥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É–≥–ª–∞ —Å–µ—Ç–∫–∏
            const startX = centerX - areaWidth / 2;
            const startY = centerY - areaHeight / 2;
            
            // –°–æ–∑–¥–∞—ë–º —Ç–æ—á–∫–∏ –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏ (25 —Ç–æ—á–µ–∫ = 5x5)
            const points = [];
            let pointIndex = 0;
            for (let row = 0; row < rows && pointIndex < totalStages; row++) {
                for (let col = 0; col < columns && pointIndex < totalStages; col++) {
                    const x = startX + col * segmentWidth;
                    const y = startY + row * segmentHeight;
                    const z = Math.sin(pointIndex * 0.2) * 20;
                    
                    points.push({ x, y, z, index: pointIndex });
                    pointIndex++;
                }
            }
            
            return points;
        }

        function drawMap() {
            map.innerHTML = '';
            const points = calculatePoints();
            
            points.forEach((point, index) => {
                const pointEl = document.createElement('div');
                pointEl.className = 'map-point';
                // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–æ—á–∫—É –Ω–∞ –µ—ë –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
                const pointSize = 30;
                pointEl.style.left = (point.x - pointSize / 2) + 'px';
                pointEl.style.top = (point.y - pointSize / 2) + 'px';
                pointEl.textContent = index + 1;
                map.appendChild(pointEl);
            });
            
            // –ü–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–µ (—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
            if (points.length > 0) {
                const char = document.createElement('div');
                char.className = 'character';
                char.textContent = 'üê∑';
                const charSize = 60;
                char.style.left = (points[0].x - charSize / 2) + 'px';
                char.style.top = (points[0].y - charSize / 2) + 'px';
                map.appendChild(char);
            }
            
            document.getElementById('pointsCount').textContent = points.length;
            updateInfo();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        drawMap();
        window.addEventListener('resize', () => {
            drawMap();
        });
    </script>
</body>
</html>

